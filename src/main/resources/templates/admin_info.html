<!DOCTYPE html>
<!--suppress ThymeleafVariablesResolveInspection -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" th:href="@{/css/font.css}">
    <link rel="stylesheet" th:href="@{/css/xadmin.css}">
    <link rel="stylesheet" th:href="@{/css/pg_btn.css}">
    <script th:src="@{/layui/jquery-3.5.1.min.js}"></script>
    <script th:src="@{/layui/layui.js}"></script>
    <script th:src="@{/js/xadmin.js}"></script>
    <title>个人资料</title>
</head>
<body>
<div class="x-body" style="padding-left: 35%;padding-top: 100px">
    <div class="layui-form">
        <div class="layui-form-item">
            <label for="a_id" class="layui-form-label">
                <span class="f_sp">ID</span>
            </label>
            <div class="layui-input-inline">
                <input type="text" id="a_id" name="a_id" th:value="${session.currentAdmin.getA_id()}"
                       autocomplete="off" class="layui-input" disabled>
            </div>
        </div>

        <div class="layui-form-item">
            <label for="username" class="layui-form-label">
                <span class="f_sp">姓名</span>
            </label>
            <div class="layui-input-inline">
                <input type="text" id="username" name="username" th:value="${session.currentAdmin.getUsername()}"
                       autocomplete="off" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label for="sex" class="layui-form-label">
                <span class="f_sp">性别</span>
            </label>
            <div class="layui-input-inline" id="sex">
                <input type="radio" name="sex" id="s_male" value="1" title="男" th:checked="${session.currentAdmin.getSex()} eq '1'">
                <input type="radio" name="sex" id="s_female" value="0" title="女" th:checked="${session.currentAdmin.getSex()} eq '0'">
            </div>
        </div>

        <div class="layui-form-item">
            <label for="birthday" class="layui-form-label">
                <span class="f_sp">出生日期</span>
            </label>
            <div class="layui-input-inline">
                <input type="date" id="birthday" name="birthday" th:value="${#dates.format(session.currentAdmin.getBirthday(),'yyyy-MM-dd')}"
                       autocomplete="off" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label for="phone" class="layui-form-label">
                <span class="f_sp">电话</span>
            </label>
            <div class="layui-input-inline">
                <input type="text" id="phone" name="phone" th:value="${session.currentAdmin.getPhone()}"
                       autocomplete="off" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label for="email" class="layui-form-label">
                <span class="f_sp">邮箱</span>
            </label>
            <div class="layui-input-inline">
                <input type="text" id="email" name="email" th:value="${session.currentAdmin.getEmail()}"
                       autocomplete="off" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label for="typeName" class="layui-form-label">
                <span class="f_sp">类型</span>
            </label>
            <div class="layui-input-inline">
                <input type="text" id="typeName" name="typeName" th:value="${session.currentAdmin.getR_id()}"
                       autocomplete="off" class="layui-input" disabled>
            </div>
        </div>

        <div class="layui-form-item">
            <label for="cre_time" class="layui-form-label">
                <span class="f_sp">注册时间</span>
            </label>
            <div class="layui-input-inline">
                <input type="text" id="cre_time" name="cre_time" th:value="${#dates.format(session.currentAdmin.getCre_time(),'yyyy-MM-dd HH:mm:ss')}"
                       autocomplete="off" class="layui-input" disabled>
            </div>
        </div>

        <div class="layui-form-item">
            <label for="login_time" class="layui-form-label">
                <span class="f_sp">最近登录</span>
            </label>
            <div class="layui-input-inline">
                <input type="text" id="login_time" name="login_time" th:value="${#dates.format(session.currentAdmin.getLogin_time(),'yyyy-MM-dd HH:mm:ss')}"
                       autocomplete="off" class="layui-input" disabled>
            </div>
        </div>

        <div class="layui-form-item" id="btn_xg">
            <button  class="layui-btn"  id="btn_on" lay-submit lay-filter="formDemo">
                修改
            </button>
        </div>


    </div>
</div>

<script th:src="@{/layui/layui.js}"></script>
<script>
    layui.use(['jquery','form','layer'], function(){
        var form = layui.form,
            $ = layui.jquery;
        form.on('submit(formDemo)', function(data) {
            $.get("/updateAdminInfo", {
                "a_id": document.getElementById("a_id").value, "username" : document.getElementById("username").value
                , "sex": document.getElementById("sex").value, "birthday": document.getElementById("birthday").value
                , "phone": document.getElementById("phone").value, "email": document.getElementById("email").value
            }, function (data) {
                if (data == 1) {
                    layer.msg('修改成功!', {icon: 1, time: 2000});
                    setTimeout(function () {window.location.href='/myInfo';}, 1000);

                }else {
                    layer.msg('修改失败!', {icon: 1, time: 2000});
                    setTimeout(function () {window.location.href='/myInfo';}, 1000);
                }
            });
        });
    });
</script>
</body>
</html>